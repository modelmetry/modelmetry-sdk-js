components:
  schemas:
    Assessment:
      additionalProperties: false
      properties:
        Action:
          default: pass
          enum:
            - pass
            - fail
            - skip
          type: string
        Expression:
          type: string
        ID:
          type: string
        Message:
          type: string
      required:
        - ID
        - Expression
        - Action
        - Message
      type: object
    AssistantMessage:
      additionalProperties: false
      properties:
        Contents:
          items:
            description: Represents a part of a completion message.
            oneOf:
              - $ref: "#/components/schemas/TextPart"
              - $ref: "#/components/schemas/DataPart"
            type: object
          type: array
        Name:
          type: string
        Role:
          enum:
            - assistant
          type: string
        ToolCalls:
          items:
            $ref: "#/components/schemas/ToolCall"
          type:
            - array
            - "null"
      required:
        - Role
        - Contents
      type: object
    AzurePromptShieldsV1Config:
      additionalProperties: false
      properties:
        Endpoint:
          description: The endpoint of the Azure Prompt Shields API.
          format: uri
          type: string
      required:
        - Endpoint
      type: object
    CheckPayloadRequestBody:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://api.modelmetry.com//schemas/CheckPayloadRequestBody.json
          format: uri
          readOnly: true
          type: string
        GuardrailID:
          type: string
        Payload:
          $ref: "#/components/schemas/Payload"
        TenantID:
          type: string
      required:
        - GuardrailID
        - Payload
      type: object
    CompletionFamilyData:
      additionalProperties: false
      properties:
        Cost:
          $ref: "#/components/schemas/Cost"
        Documents:
          items:
            $ref: "#/components/schemas/Document"
          type: array
        Messages:
          items:
            description: Represents a completion message.
            discriminator:
              mapping:
                assistant: "#/components/schemas/AssistantMessage"
                system: "#/components/schemas/SystemMessage"
                tool: "#/components/schemas/ToolMessage"
                user: "#/components/schemas/UserMessage"
              propertyName: Role
            oneOf:
              - $ref: "#/components/schemas/SystemMessage"
              - $ref: "#/components/schemas/UserMessage"
              - $ref: "#/components/schemas/AssistantMessage"
              - $ref: "#/components/schemas/ToolMessage"
            type: object
          type: array
        Options:
          $ref: "#/components/schemas/Options"
        Usage:
          $ref: "#/components/schemas/Usage"
      type: object
    CompletionPayload:
      additionalProperties: false
      properties:
        Messages:
          items:
            description: Represents a completion message.
            discriminator:
              mapping:
                assistant: "#/components/schemas/AssistantMessage"
                system: "#/components/schemas/SystemMessage"
                tool: "#/components/schemas/ToolMessage"
                user: "#/components/schemas/UserMessage"
              propertyName: Role
            oneOf:
              - $ref: "#/components/schemas/SystemMessage"
              - $ref: "#/components/schemas/UserMessage"
              - $ref: "#/components/schemas/AssistantMessage"
              - $ref: "#/components/schemas/ToolMessage"
            type: object
          type: array
        Options:
          additionalProperties: {}
          type: object
      required:
        - Options
        - Messages
      type: object
    Cost:
      additionalProperties: false
      properties:
        Input:
          $ref: "#/components/schemas/Money"
        Output:
          $ref: "#/components/schemas/Money"
        Total:
          $ref: "#/components/schemas/Money"
      type: object
    CreateEventParams:
      additionalProperties: false
      properties:
        At:
          format: date-time
          type:
            - string
            - "null"
        EntryID:
          type:
            - string
            - "null"
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        SpanID:
          type:
            - string
            - "null"
        TraceID:
          type:
            - string
            - "null"
        XID:
          type: string
      required:
        - XID
        - Name
      type: object
    CreateFindingParams:
      additionalProperties: false
      properties:
        At:
          format: date-time
          type:
            - string
            - "null"
        Comment:
          type:
            - string
            - "null"
        Description:
          type:
            - string
            - "null"
        EntryID:
          type:
            - string
            - "null"
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        Source:
          default: annotation
          enum:
            - annotation
            - evaluator
            - sdk
          type:
            - string
            - "null"
        SpanID:
          type:
            - string
            - "null"
        TraceID:
          type:
            - string
            - "null"
        Value:
          oneOf:
            - type: number
            - type: boolean
            - type: string
        XID:
          type: string
      required:
        - XID
        - Name
        - Value
      type: object
    CreateSessionParams:
      additionalProperties: false
      properties:
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type:
            - string
            - "null"
        XID:
          type: string
      required:
        - XID
      type: object
    CreateSpanParams:
      additionalProperties: false
      properties:
        End:
          format: date-time
          type:
            - string
            - "null"
        Family:
          type:
            - string
            - "null"
        FamilyData: {}
        Message:
          type:
            - string
            - "null"
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        ParentID:
          type:
            - string
            - "null"
        Severity:
          type:
            - string
            - "null"
        Start:
          format: date-time
          type: string
        TraceID:
          type: string
        XID:
          type: string
      required:
        - TraceID
        - XID
        - Name
        - Start
        - End
      type: object
    CreateTraceParams:
      additionalProperties: false
      properties:
        End:
          format: date-time
          type:
            - string
            - "null"
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type:
            - string
            - "null"
        SessionID:
          type:
            - string
            - "null"
        Start:
          format: date-time
          type: string
        XID:
          type: string
      required:
        - XID
        - Start
      type: object
    DataPart:
      additionalProperties: false
      properties:
        Data:
          contentEncoding: base64
          type: string
        Detail:
          enum:
            - auto
            - low
            - high
          type: string
        MimeType:
          type: string
      required:
        - MimeType
        - Data
      type: object
    Document:
      additionalProperties: false
      properties:
        Content: {}
        ContentType:
          type: string
        Identifier:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Title:
          type: string
      required:
        - Identifier
        - Title
        - ContentType
      type: object
    EmbeddingsFamilyData:
      additionalProperties: false
      properties:
        Inputs:
          items:
            type: string
          type:
            - array
            - "null"
        Options:
          $ref: "#/components/schemas/Options"
      required:
        - Inputs
        - Options
      type: object
    Entry:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://api.modelmetry.com//schemas/Entry.json
          format: uri
          readOnly: true
          type: string
        CheckID:
          type:
            - string
            - "null"
        Config:
          additionalProperties: {}
          type: object
        CreatedAt:
          format: date-time
          type: string
        CreatedBy:
          type: string
        DurationMs:
          format: int64
          type: integer
        EvaluatorID:
          type: string
        Findings:
          items:
            $ref: "#/components/schemas/Finding"
          type:
            - array
            - "null"
        FinishedAt:
          format: date-time
          type:
            - string
            - "null"
        Grading:
          $ref: "#/components/schemas/GradingConfiguration"
        ID:
          type: string
        InstanceID:
          type:
            - string
            - "null"
        Message:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Outcome:
          default: na
          description: The status of the entry.
          enum:
            - na
            - pending
            - pass
            - fail
            - error
            - skip
          type: string
        Payload:
          $ref: "#/components/schemas/Payload"
        Skip:
          type: string
        SpanID:
          type:
            - string
            - "null"
        StartedAt:
          format: date-time
          type: string
        TenantID:
          type: string
        TraceID:
          type:
            - string
            - "null"
        UpdatedAt:
          format: date-time
          type: string
        UpdatedBy:
          type: string
      required:
        - ID
        - TenantID
        - CheckID
        - InstanceID
        - TraceID
        - SpanID
        - EvaluatorID
        - Config
        - Payload
        - Grading
        - Outcome
        - Skip
        - Message
        - Findings
        - Metadata
        - StartedAt
        - FinishedAt
        - DurationMs
        - UpdatedAt
        - UpdatedBy
        - CreatedAt
        - CreatedBy
      type: object
    ErrorDetail:
      additionalProperties: false
      properties:
        location:
          description: Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'
          type: string
        message:
          description: Error message text
          type: string
        value:
          description: The value at the given location
      type: object
    ErrorModel:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://api.modelmetry.com//schemas/ErrorModel.json
          format: uri
          readOnly: true
          type: string
        detail:
          description: A human-readable explanation specific to this occurrence of the problem.
          examples:
            - Property foo is required but is missing.
          type: string
        errors:
          description: Optional list of individual error details
          items:
            $ref: "#/components/schemas/ErrorDetail"
          type:
            - array
            - "null"
        instance:
          description: A URI reference that identifies the specific occurrence of the problem.
          examples:
            - https://example.com/error-log/abc123
          format: uri
          type: string
        status:
          description: HTTP status code
          examples:
            - 400
          format: int64
          type: integer
        title:
          description: A short, human-readable summary of the problem type. This value should not change between occurrences of the error.
          examples:
            - Bad Request
          type: string
        type:
          default: about:blank
          description: A URI reference to human-readable documentation for the error.
          examples:
            - https://example.com/errors/example
          format: uri
          type: string
      type: object
    EvaluateRequestBody:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://api.modelmetry.com//schemas/EvaluateRequestBody.json
          format: uri
          readOnly: true
          type: string
        ByConfig:
          $ref: "#/components/schemas/EvaluateRequestByConfig"
        ByEntry:
          $ref: "#/components/schemas/EvaluateRequestByEntry"
        ByInstance:
          $ref: "#/components/schemas/EvaluateRequestByInstance"
        Persist:
          type:
            - boolean
            - "null"
        TenantID:
          type: string
      required:
        - TenantID
      type: object
    EvaluateRequestByConfig:
      additionalProperties: false
      properties:
        Config:
          additionalProperties: {}
          type: object
        EvaluatorID:
          type: string
        Grading:
          $ref: "#/components/schemas/GradingConfiguration"
        Payload:
          $ref: "#/components/schemas/Payload"
        Secrets:
          items:
            type: string
          type:
            - array
            - "null"
      required:
        - EvaluatorID
        - Config
        - Payload
      type: object
    EvaluateRequestByEntry:
      additionalProperties: false
      properties:
        EntryID:
          type: string
      required:
        - EntryID
      type: object
    EvaluateRequestByInstance:
      additionalProperties: false
      properties:
        InstanceID:
          type: string
        Payload:
          $ref: "#/components/schemas/Payload"
      required:
        - InstanceID
        - Payload
      type: object
    Event:
      additionalProperties: false
      properties:
        CreatedAt:
          format: date-time
          type: string
        EntryID:
          type:
            - string
            - "null"
        ID:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        SpanID:
          type:
            - string
            - "null"
        TenantID:
          type: string
        TraceID:
          type:
            - string
            - "null"
        UpdatedAt:
          format: date-time
          type: string
        XID:
          type: string
      required:
        - ID
        - XID
        - TenantID
        - Name
        - Metadata
        - UpdatedAt
        - CreatedAt
        - TraceID
        - SpanID
        - EntryID
      type: object
    Finding:
      additionalProperties: false
      properties:
        CheckID:
          type: string
        Comment:
          type: string
        CreatedAt:
          format: date-time
          type: string
        EntryID:
          type: string
        EvaluatorID:
          type:
            - string
            - "null"
        ID:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        Source:
          default: annotation
          enum:
            - annotation
            - evaluator
            - sdk
          type: string
        SpanID:
          type: string
        TenantID:
          type: string
        TraceID:
          type: string
        Unit:
          type: string
        UpdatedAt:
          format: date-time
          type: string
        Value:
          oneOf:
            - type: number
            - type: boolean
            - type: string
        XID:
          type: string
      required:
        - ID
        - TenantID
        - XID
        - Name
        - Value
        - Unit
        - Source
        - Comment
        - Metadata
        - EvaluatorID
        - UpdatedAt
        - CreatedAt
      type: object
    FullTrace:
      additionalProperties: false
      properties:
        CreatedAt:
          format: date-time
          type: string
        End:
          format: date-time
          type: string
        Events:
          items:
            $ref: "#/components/schemas/Event"
          type:
            - array
            - "null"
        Findings:
          items:
            $ref: "#/components/schemas/Finding"
          type:
            - array
            - "null"
        ID:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        SessionID:
          type:
            - string
            - "null"
        Spans:
          items:
            $ref: "#/components/schemas/Span"
          type:
            - array
            - "null"
        Start:
          format: date-time
          type: string
        TenantID:
          type: string
        UpdatedAt:
          format: date-time
          type: string
        XID:
          type: string
      required:
        - Spans
        - Events
        - Findings
        - ID
        - XID
        - TenantID
        - Name
        - Start
        - End
        - Metadata
        - UpdatedAt
        - CreatedAt
      type: object
    Function:
      additionalProperties: false
      properties:
        Arguments: {}
        Name:
          type: string
      required:
        - Name
        - Arguments
      type: object
    GoogleDLPPIIDetectorV1Config:
      additionalProperties: false
      properties:
        InfoTypes:
          description: Info types to detect as per Google Cloud DLP's documentation
          items:
            type: string
          minItems: 1
          type:
            - array
            - "null"
        MinimumLikelihood:
          default: LIKELY
          description: Threshold for detection
          enum:
            - VERY_LIKELY
            - LIKELY
            - POSSIBLE
            - UNLIKELY
            - VERY_UNLIKELY
          type: string
      required:
        - InfoTypes
        - MinimumLikelihood
      type: object
    GoogleTextModerationV1Config:
      additionalProperties: false
      properties:
        Attributes:
          default: []
          description: The attributes to check for. An empty list will check for all attributes.
          items:
            enum:
              - TOXICITY
              - DEROGATORY
              - VIOLENCE
              - SEX
              - INSULT
              - PROFANITY
              - THREAT
              - WEAPONS
              - PUBLIC_SAFETY
              - HEALTH
              - RELIGION
              - ILLICIT_DRUGS
              - WAR
              - FINANCIAL
              - POLITICAL
              - LEGAL
            type: string
          type:
            - array
            - "null"
      required:
        - Attributes
      type: object
    GradingConfiguration:
      additionalProperties: false
      properties:
        Assessments:
          items:
            $ref: "#/components/schemas/Assessment"
          type: array
      required:
        - Assessments
      type: object
    GuardrailCheck:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://api.modelmetry.com//schemas/GuardrailCheck.json
          format: uri
          readOnly: true
          type: string
        CreatedAt:
          format: date-time
          type: string
        CreatedBy:
          type: string
        DurationMs:
          format: int64
          type: integer
        GuardrailID:
          type: string
        ID:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Outcome:
          default: na
          description: The status of the entry.
          enum:
            - pass
            - fail
            - error
          type: string
        Payload:
          $ref: "#/components/schemas/Payload"
        SummarisedEntries:
          items:
            $ref: "#/components/schemas/SummarisedEntry"
          type:
            - array
            - "null"
        TenantID:
          type: string
        UpdatedAt:
          format: date-time
          type: string
        UpdatedBy:
          type: string
      required:
        - ID
        - TenantID
        - GuardrailID
        - Payload
        - Outcome
        - Metadata
        - SummarisedEntries
        - DurationMs
        - UpdatedAt
        - UpdatedBy
        - CreatedAt
        - CreatedBy
      type: object
    IngestSignalsV1RequestBody:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://api.modelmetry.com//schemas/IngestSignalsV1RequestBody.json
          format: uri
          readOnly: true
          type: string
        Events:
          items:
            $ref: "#/components/schemas/CreateEventParams"
          type:
            - array
            - "null"
        Findings:
          items:
            $ref: "#/components/schemas/CreateFindingParams"
          type:
            - array
            - "null"
        Sessions:
          items:
            $ref: "#/components/schemas/CreateSessionParams"
          type:
            - array
            - "null"
        Spans:
          items:
            $ref: "#/components/schemas/CreateSpanParams"
          type:
            - array
            - "null"
        Traces:
          items:
            $ref: "#/components/schemas/CreateTraceParams"
          type:
            - array
            - "null"
      type: object
    IngestSignalsV1ResponseBody:
      additionalProperties: false
      properties:
        $schema:
          description: A URL to the JSON Schema for this object.
          examples:
            - http://api.modelmetry.com//schemas/IngestSignalsV1ResponseBody.json
          format: uri
          readOnly: true
          type: string
      type: object
    ModelmetryBooleanLLMAsJudgeV1Config:
      additionalProperties: false
      properties:
        FindingName:
          description: The name of the finding to use for this evaluator's boolean output (e.g., is_threatening, is_about_hotels).
          type: string
        Instructions:
          description: You are an LLM evaluator. We need the guarantee that the output answers what is being asked on the input, please evaluate as False if it doesn't.
          minLength: 1
          type: string
        MaxTokens:
          default: 8192
          description: The limit on the number of tokens the entire prompt can be.
          format: int64
          type: integer
        Model:
          default: openai/gpt-4o-mini
          description: The model to use.
          enum:
            - openai/gpt-4o-mini
            - openai/gpt-4o
            - openai/gpt-3.5-turbo
            - groq/llama3-8b-8192
            - groq/llama3-70b-8192
            - groq/mixtral-8x7b-32768
            - groq/gemma-7b-it
            - google/gemini-1.5-flash
            - google/gemini-1.5-pro
          type: string
          x-ui-field-type: model-provider-picker
      required:
        - Model
        - Instructions
        - MaxTokens
        - FindingName
      type: object
    ModelmetryCompetitorBlocklistV1Config:
      additionalProperties: false
      properties:
        CaseSensitivity:
          default: case_sensitive
          description: Whether to consider the word's case when matching strings
          enum:
            - case_sensitive
            - case_insensitive
          type: string
        Competitors:
          description: List of competitors to search for
          items:
            type: string
          minItems: 1
          type:
            - array
            - "null"
        LookIn:
          default: "*"
          description: Where to search for competitor mentions
          enum:
            - user
            - assistant
            - "*"
          type: string
      required:
        - LookIn
        - Competitors
        - CaseSensitivity
      type: object
    ModelmetryEmbeddingsSimilarityV1Config:
      additionalProperties: false
      properties:
        ExtractionMethod:
          description: The method to use for extracting text strings.
          enum:
            - last-user-vs-assistant
            - reference-vs-all-messages
            - reference-vs-last-assistant
            - reference-vs-last-user
          type: string
        Model:
          description: The model to use for encoding text to embeddings (only OpenAI models at this stage).
          enum:
            - openai/text-embedding-3-small
            - openai/text-embedding-3-large
          type: string
        ReferenceText:
          description: The reference text to compare against. Be as detailed or as general as you like.
          type: string
        Strategy:
          description: The strategy to use for computing similarity.
          enum:
            - cosine
            - euclidean-distance
            - dot-product
          type: string
      required:
        - Model
        - ReferenceText
        - Strategy
        - ExtractionMethod
      type: object
    ModelmetryEmotionAnalysisV1Config:
      additionalProperties: false
      type: object
    ModelmetryHTTPRequestV1Config:
      additionalProperties: false
      properties:
        FindingsJSONPath:
          description: The JSON path to the findings in the response body.
          type:
            - string
            - "null"
        Headers:
          additionalProperties:
            type: string
          description: A map of headers to include in the request.
          type: object
        MessageJSONPath:
          description: The JSON path to the message in the response body.
          type:
            - string
            - "null"
        Method:
          default: POST
          description: The HTTP method to use for the request.
          enum:
            - POST
          type: string
        OutcomeJSONPath:
          description: The JSON path to the outcome in the response body.
          type:
            - string
            - "null"
        URL:
          description: The URL to send the HTTP request to.
          format: uri
          type: string
      required:
        - URL
        - Method
        - Headers
      type: object
    ModelmetryJSONValidatorV1Config:
      additionalProperties: false
      properties:
        ExpectedJSONSchema:
          description: The expected JSON schema to validate against
          type: string
      type: object
    ModelmetryLanguageDetectorV1Config:
      additionalProperties: false
      properties:
        ConfidenceThreshold:
          default: 0.2
          description: Minimum confidence threshold for the language detection. If the confidence is lower than this, the evaluation will be skipped.
          format: double
          maximum: 1
          minimum: 0
          type: number
        WordCountThreshold:
          default: 2
          description: Minimum number of words to check, as the language detection can be unreliable for very short texts. Texts shorter than the minimum will be skipped.
          format: int64
          minimum: 0
          type: integer
      required:
        - WordCountThreshold
        - ConfidenceThreshold
      type: object
    ModelmetryScoreLLMAsJudgeV1Config:
      additionalProperties: false
      properties:
        FindingName:
          description: The name of the finding to use for the result (e.g., threatening_level, about_hotel_score).
          type: string
        Instructions:
          description: You are an LLM evaluator. Please score from 0.0 to 1.0 how likely the user is to be satisfied with this answer, from 0.0 being not satisfied at all to 1.0 being completely satisfied.
          minLength: 1
          type: string
        MaxTokens:
          default: 8192
          description: The limit on the number of tokens the entire prompt can be.
          format: int64
          type: integer
        Model:
          default: openai/gpt-4o-mini
          description: The model to use.
          enum:
            - openai/gpt-4o-mini
            - openai/gpt-4o
            - openai/gpt-3.5-turbo
            - groq/llama3-8b-8192
            - groq/llama3-70b-8192
            - groq/mixtral-8x7b-32768
            - groq/gemma-7b-it
            - google/gemini-1.5-flash
            - google/gemini-1.5-pro
          type: string
          x-ui-field-type: model-provider-picker
      required:
        - Model
        - Instructions
        - MaxTokens
        - FindingName
      type: object
    ModelmetrySecretDetectorV1Config:
      additionalProperties: false
      properties:
        CustomPatterns:
          additionalProperties:
            type: string
          description: Custom regex patterns to detect secrets
          type: object
      type: object
    ModelmetrySentimentAnalysisV1Config:
      additionalProperties: false
      properties:
        Model:
          default: openai/gpt-4o-mini
          description: The model to use.
          enum:
            - openai/gpt-4o-mini
            - openai/gpt-4o
            - openai/gpt-3.5-turbo
            - groq/llama3-8b-8192
            - groq/llama3-70b-8192
            - groq/mixtral-8x7b-32768
            - groq/gemma-7b-it
            - google/gemini-1.5-flash
            - google/gemini-1.5-pro
          type: string
          x-ui-field-type: model-provider-picker
        Scope:
          enum:
            - interaction.last
            - user.last
            - assistant.last
            - last
          type: string
      required:
        - Model
        - Scope
      type: object
    ModelmetryTextReadabilityV1Config:
      additionalProperties: false
      properties:
        Scope:
          default: last
          enum:
            - interaction.last
            - user.last
            - assistant.last
            - last
          type: string
      required:
        - Scope
      type: object
    ModelmetryToolsCalledV1Config:
      additionalProperties: false
      properties:
        Expectations:
          items:
            $ref: "#/components/schemas/ModelmetryToolsCalledV1Expectation"
        Expections:
          description: The expected JSON schema to validate against
          items:
            $ref: "#/components/schemas/ModelmetryToolsCalledV1Expectation"
          type: array
      required:
        - Expections
      type: object
    ModelmetryToolsCalledV1Expectation:
      additionalProperties: false
      properties:
        Expression:
          description: The expression to check the tool call's arguements against
          type: string
        Name:
          description: The name of the tool call
          type: string
      required:
        - Name
        - Expression
      type: object
    Money:
      additionalProperties: false
      properties:
        Amount:
          type: number
        Currency:
          maxLength: 3
          minLength: 3
          pattern: ^[A-Z]{3}$
          type: string
      required:
        - Amount
        - Currency
      type: object
    Options:
      additionalProperties: false
      properties:
        APIKey:
          type: string
        APIVersion:
          type: string
        BaseURL:
          type: string
        DeploymentID:
          type: string
        FrequencyPenalty:
          format: double
          type: number
        FunctionCall:
          type: string
        Functions:
          items:
            type: string
          type:
            - array
            - "null"
        LogitBias:
          additionalProperties: {}
          type: object
        Logprobs:
          type: boolean
        MaxTokens:
          format: int64
          type: integer
        Model:
          type: string
        ModelList:
          items:
            type: string
          type:
            - array
            - "null"
        "N":
          format: int64
          type: integer
        PresencePenalty:
          format: double
          type: number
        Provider:
          type: string
        ResponseFormat:
          additionalProperties: {}
          type: object
        Seed:
          format: int64
          type: integer
        Stop:
          additionalProperties: {}
          type: object
        Stream:
          type: boolean
        Temperature:
          format: double
          maximum: 1
          minimum: 0
          type: number
        Timeout:
          format: double
          minimum: 0
          type: number
        ToolChoice:
          type: string
        Tools:
          items:
            $ref: "#/components/schemas/Tool"
          type:
            - array
            - "null"
        TopLogprobs:
          format: int64
          type: integer
        TopP:
          format: double
          maximum: 1
          minimum: 0
          type: number
        User:
          type: string
      type: object
    OtherFamilyData:
      additionalProperties: false
      type: object
    Payload:
      additionalProperties: false
      properties:
        Completion:
          $ref: "#/components/schemas/CompletionPayload"
      type: object
    RetrievalFamilyData:
      additionalProperties: false
      properties:
        Documents:
          items:
            $ref: "#/components/schemas/Document"
          type:
            - array
            - "null"
        Queries:
          items:
            $ref: "#/components/schemas/RetrievalQuery"
          type:
            - array
            - "null"
      required:
        - Queries
        - Documents
      type: object
    RetrievalQuery:
      additionalProperties: false
      properties:
        Embeddings:
          items:
            format: float
            type: number
          type:
            - array
            - "null"
        TextRepresentation:
          type: string
      required:
        - TextRepresentation
      type: object
    SimplifiedFinding:
      additionalProperties: false
      properties:
        Comment:
          type: string
        CreatedAt:
          format: date-time
          type: string
        EvaluatorID:
          type:
            - string
            - "null"
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        Source:
          default: annotation
          enum:
            - annotation
            - evaluator
            - sdk
          type: string
        Value:
          oneOf:
            - type: number
            - type: boolean
            - type: string
      required:
        - Name
        - Value
        - Source
        - Comment
        - Metadata
        - EvaluatorID
        - CreatedAt
      type: object
    Span:
      additionalProperties: false
      properties:
        Completion:
          $ref: "#/components/schemas/CompletionFamilyData"
        CreatedAt:
          format: date-time
          type: string
        Embeddings:
          $ref: "#/components/schemas/EmbeddingsFamilyData"
        End:
          format: date-time
          type: string
        Events:
          items:
            $ref: "#/components/schemas/Event"
          type:
            - array
            - "null"
        Family:
          type: string
        Findings:
          items:
            $ref: "#/components/schemas/Finding"
          type:
            - array
            - "null"
        ID:
          type: string
        Message:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        Other:
          $ref: "#/components/schemas/OtherFamilyData"
        ParentID:
          type:
            - string
            - "null"
        Retrieval:
          $ref: "#/components/schemas/RetrievalFamilyData"
        Severity:
          type: string
        Start:
          format: date-time
          type: string
        TenantID:
          type: string
        TraceID:
          type: string
        UpdatedAt:
          format: date-time
          type: string
        XID:
          type: string
      required:
        - ID
        - XID
        - TenantID
        - TraceID
        - ParentID
        - Name
        - Family
        - Severity
        - Message
        - Start
        - End
        - Metadata
        - Events
        - Findings
        - UpdatedAt
        - CreatedAt
      type: object
    SummarisedEntry:
      additionalProperties: false
      properties:
        CheckID:
          type:
            - string
            - "null"
        DurationMs:
          format: int64
          type: integer
        EvaluatorID:
          type: string
        Findings:
          items:
            $ref: "#/components/schemas/SimplifiedFinding"
          type:
            - array
            - "null"
        ID:
          type: string
        InstanceID:
          type:
            - string
            - "null"
        Message:
          type: string
        Outcome:
          default: na
          description: The status of the entry.
          enum:
            - na
            - pending
            - pass
            - fail
            - error
            - skip
          type: string
        Skip:
          type: string
        SpanID:
          type:
            - string
            - "null"
        TenantID:
          type: string
        TraceID:
          type:
            - string
            - "null"
      required:
        - ID
        - TenantID
        - CheckID
        - InstanceID
        - TraceID
        - SpanID
        - EvaluatorID
        - Outcome
        - Skip
        - Message
        - Findings
        - DurationMs
      type: object
    SystemMessage:
      additionalProperties: false
      properties:
        Contents:
          items:
            description: Represents a part of a completion message.
            oneOf:
              - $ref: "#/components/schemas/TextPart"
              - $ref: "#/components/schemas/DataPart"
            type: object
          type: array
        Name:
          type: string
        Role:
          enum:
            - system
          type: string
      required:
        - Role
        - Contents
      type: object
    TextPart:
      additionalProperties: false
      properties:
        Text:
          type: string
      required:
        - Text
      type: object
    Tool:
      additionalProperties: false
      properties:
        Description:
          type: string
        Name:
          type: string
        Parameters: {}
      required:
        - Name
        - Description
        - Parameters
      type: object
    ToolCall:
      additionalProperties: false
      properties:
        Function:
          $ref: "#/components/schemas/Function"
        ID:
          type: string
        Type:
          enum:
            - function
          type: string
      required:
        - Type
        - ID
        - Function
      type: object
    ToolMessage:
      additionalProperties: false
      properties:
        Contents:
          items:
            description: Represents a part of a completion message.
            oneOf:
              - $ref: "#/components/schemas/TextPart"
              - $ref: "#/components/schemas/DataPart"
            type: object
          type: array
        Role:
          enum:
            - tool
          type: string
        ToolCallID:
          type: string
      required:
        - Contents
        - Role
        - ToolCallID
      type: object
    Trace:
      additionalProperties: false
      properties:
        CreatedAt:
          format: date-time
          type: string
        End:
          format: date-time
          type: string
        ID:
          type: string
        Metadata:
          additionalProperties: {}
          type: object
        Name:
          type: string
        SessionID:
          type:
            - string
            - "null"
        Start:
          format: date-time
          type: string
        TenantID:
          type: string
        UpdatedAt:
          format: date-time
          type: string
        XID:
          type: string
      required:
        - ID
        - XID
        - TenantID
        - Name
        - Start
        - End
        - Metadata
        - UpdatedAt
        - CreatedAt
      type: object
    Usage:
      additionalProperties: false
      properties:
        Input:
          $ref: "#/components/schemas/UsageValue"
        Output:
          $ref: "#/components/schemas/UsageValue"
        Total:
          $ref: "#/components/schemas/UsageValue"
      type: object
    UsageValue:
      additionalProperties: false
      properties:
        Amount:
          format: double
          type: number
        Unit:
          default: tokens
          type: string
      required:
        - Amount
        - Unit
      type: object
    UserMessage:
      additionalProperties: false
      properties:
        Contents:
          items:
            description: Represents a part of a completion message.
            oneOf:
              - $ref: "#/components/schemas/TextPart"
              - $ref: "#/components/schemas/DataPart"
            type: object
          type: array
        Name:
          type: string
        Role:
          enum:
            - user
          type: string
      required:
        - Contents
        - Role
      type: object
  securitySchemes:
    apikeyAuth:
      in: header
      name: X-API-KEY
      type: apiKey
info:
  title: Modelmetry API
  version: 1.0.0
openapi: 3.1.0
paths:
  /checks:
    post:
      operationId: check-payload
      parameters:
        - explode: false
          in: query
          name: dryrun
          schema:
            type: boolean
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CheckPayloadRequestBody"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GuardrailCheck"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      security:
        - apikeyAuth: []
      summary: Check payload
  /evaluations:
    post:
      operationId: evaluate
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EvaluateRequestBody"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Entry"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      security:
        - apikeyAuth: []
        - bearerAuth: []
      summary: Evaluate
  /signals/ingest/v1:
    post:
      operationId: ingest-signals-v1
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/IngestSignalsV1RequestBody"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/IngestSignalsV1ResponseBody"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      security:
        - apikeyAuth: []
      summary: Ingest signals v1
servers:
  - url: http://api.modelmetry.com/
